<div class="general-related-tags-column">
  <% if related_tags.present? && related_tags.tag.present? %>
    <% if related_tags.tag.present? %>
      <%= tag.h3(link_to_search(related_tags.tag), class: "ml-4") %>
    <% else %>
      <%= tag.h3(related_tags.pretty_name, class: "ml-4") %>
    <% end %>

    <%= render(TabPanelComponent.new(classes: "button-group-tab-panel") do |t| %>
      <% t.panel("All", active: true, classes: "ml-4 button-xs") do %>
        <%= render "related_tags/tag_column", tags: related_tags.similar_tags.map(&:name), class: "all-related-tags-column", title: nil %>
      <% end %>

      <% related_tags.related_categories.reverse.each do |category| %>
        <% t.panel(TagCategory.reverse_mapping[category].upcase_first.pluralize, classes: "button-xs") do %>
          <%= render "related_tags/tag_column", tags: related_tags.frequent_tags(categories: [category]).map(&:name), title: nil %>
        <% end %>
      <% end %>

      <% if related_tags.wiki_page_tags.present? %>
        <% t.panel("Wiki", classes: "button-xs") do %>
          <%= render "related_tags/tag_column", tags: related_tags.wiki_page_tags, class: "wiki-related-tags-column", title: nil %>
        <% end %>
      <% end %>
    <% end) %>
  <% end %>
</div>
